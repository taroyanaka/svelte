var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode&&t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function d(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}let g;function y(t){g=t}function w(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const b=[],k=[];let $=[];const v=[],A=Promise.resolve();let E=!1;function R(t){$.push(t)}const x=new Set;let C=0;function j(){if(0!==C)return;const t=g;do{try{for(;C<b.length;){const t=b[C];C++,y(t),O(t.$$)}}catch(t){throw b.length=0,C=0,t}for(y(null),b.length=0,C=0;k.length;)k.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];x.has(e)||(x.add(e),e())}$.length=0}while(b.length);for(;v.length;)v.pop()();E=!1,x.clear(),y(t)}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const M=new Set;function P(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];$.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),$=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function S(t,e){-1===t.$$.dirty[0]&&(b.push(t),E||(E=!0,A.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(l,c,r,i,u,f,p,h=[-1]){const m=g;y(l);const d=l.$$={fragment:null,ctx:[],props:f,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(m?m.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:c.target||m.$$.root};p&&p(d.root);let _=!1;if(d.ctx=r?r(l,c.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return d.ctx&&u(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),_&&S(l,t)),e})):[],d.update(),_=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);d.fragment&&d.fragment.l(t),t.forEach(s)}else d.fragment&&d.fragment.c();c.intro&&((w=l.$$.fragment)&&w.i&&(M.delete(w),w.i(b))),function(t,n,l,c){const{fragment:r,after_update:s}=t.$$;r&&r.m(n,l),c||R((()=>{const n=t.$$.on_mount.map(e).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),s.forEach(R)}(l,c.target,c.anchor,c.customElement),j()}var w,b;y(m)}class N{$destroy(){P(this,1),this.$destroy=t}$on(e,n){if(!a(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function B(t,e,n){const o=t.slice();return o[69]=e[n],o[71]=n,o}function T(t,e,n){const o=t.slice();return o[72]=e[n],o[74]=n,o}function L(t,e,n){const o=t.slice();return o[75]=e[n],o[74]=n,o}function Y(t,e,n){const o=t.slice();return o[69]=e[n],o[71]=n,o}function U(t,e,n){const o=t.slice();return o[69]=e[n],o[71]=n,o}function z(t,e,n){const o=t.slice();return o[79]=e[n],o[74]=n,o}function G(t){let e,n,o,a,l=t[79].tag+"";function i(){return t[32](t[79])}return{c(){e=u("button"),n=f(l)},m(t,l){r(t,e,l),c(e,n),o||(a=h(e,"click",i),o=!0)},p(e,o){t=e,1&o[0]&&l!==(l=t[79].tag+"")&&d(n,l)},d(t){t&&s(e),o=!1,a()}}}function Q(t){let e,n;return{c(){e=u("option"),e.__value=n=t[69].tag,e.value=e.__value},m(t,n){r(t,e,n)},p(t,o){128&o[0]&&n!==(n=t[69].tag)&&(e.__value=n,e.value=e.__value)},d(t){t&&s(e)}}}function q(e){let n;return{c(){n=u("span"),n.textContent="😇"},m(t,e){r(t,n,e)},p:t,d(t){t&&s(n)}}}function F(t){let e,n,l,i,m,_,g,y,w,b,k=t[75].reply+"",$=t[75].username+"";function v(){return t[39](t[75])}return{c(){e=u("li"),n=f(k),l=p(),i=u("button"),m=f($),_=p(),g=u("button"),g.textContent="fetch_delete_comment_reply",y=p()},m(o,s){r(o,e,s),c(e,n),c(e,l),c(e,i),c(i,m),c(e,_),c(e,g),r(o,y,s),w||(b=[h(i,"click",v),h(g,"click",(function(){a(t[19](t[75].id))&&t[19](t[75].id).apply(this,arguments)}))],w=!0)},p(e,o){t=e,1&o[0]&&k!==(k=t[75].reply+"")&&d(n,k),1&o[0]&&$!==($=t[75].username+"")&&d(m,$)},d(t){t&&s(e),t&&s(y),w=!1,o(b)}}}function H(t){let e,n,l,g,y,w,b,k,$,v,A,E,R,x,C,j,O,M=t[72][t[74]].comment+"",P=t[72][t[74]].username+"";function S(){return t[37](t[72],t[74])}let D=t[72].comment_replies,N=[];for(let e=0;e<D.length;e+=1)N[e]=F(L(t,D,e));return{c(){e=u("li"),n=f(M),l=p(),g=u("button"),y=f(P),w=p(),b=u("button"),b.textContent="fetch_delete_comment",k=p(),$=u("input"),v=p(),A=u("button"),A.textContent="fetch_insert_comment_reply",E=p(),R=u("li"),x=u("ul");for(let t=0;t<N.length;t+=1)N[t].c();C=p(),m($,"type","text"),m($,"placeholder","comment_reply"),m(R,"class","reply_zone svelte-1mb8pst")},m(o,s){r(o,e,s),c(e,n),c(e,l),c(e,g),c(g,y),c(e,w),c(e,b),r(o,k,s),r(o,$,s),_($,t[5]),r(o,v,s),r(o,A,s),r(o,E,s),r(o,R,s),c(R,x);for(let t=0;t<N.length;t+=1)N[t]&&N[t].m(x,null);r(o,C,s),j||(O=[h(g,"click",S),h(b,"click",(function(){a(t[17](t[72][t[74]].id))&&t[17](t[72][t[74]].id).apply(this,arguments)})),h($,"input",t[38]),h(A,"click",(function(){a(t[18](t[72][t[74]].id))&&t[18](t[72][t[74]].id).apply(this,arguments)}))],j=!0)},p(e,o){if(t=e,1&o[0]&&M!==(M=t[72][t[74]].comment+"")&&d(n,M),1&o[0]&&P!==(P=t[72][t[74]].username+"")&&d(y,P),32&o[0]&&$.value!==t[5]&&_($,t[5]),34078721&o[0]){let e;for(D=t[72].comment_replies,e=0;e<D.length;e+=1){const n=L(t,D,e);N[e]?N[e].p(n,o):(N[e]=F(n),N[e].c(),N[e].m(x,null))}for(;e<N.length;e+=1)N[e].d(1);N.length=D.length}},d(t){t&&s(e),t&&s(k),t&&s($),t&&s(v),t&&s(A),t&&s(E),t&&s(R),i(N,t),t&&s(C),j=!1,o(O)}}}function I(t){let e,n,l,g,y,w,b,k,$,v,A,E,R,x,C,j,O,M,P,S,D,N,B,L,F,I,J,V,K,W,X,Z,tt,et,nt,ot,at,lt=t[69].link+"",ct=t[69].username+"",rt=t[69].tags,st=[];for(let e=0;e<rt.length;e+=1)st[e]=G(z(t,rt,e));let it=t[7],ut=[];for(let e=0;e<it.length;e+=1)ut[e]=Q(U(t,it,e));function ft(){return t[35](t[69])}let pt=t[69].likes,ht=[];for(let e=0;e<pt.length;e+=1)ht[e]=q(Y(t,pt,e));let mt=t[69].comments_and_replies,dt=[];for(let e=0;e<mt.length;e+=1)dt[e]=H(T(t,mt,e));return{c(){e=u("br"),n=p(),l=u("br"),g=p(),y=u("li"),w=u("div");for(let t=0;t<st.length;t+=1)st[t].c();b=p(),k=u("div"),$=u("input"),v=p(),A=u("datalist");for(let t=0;t<ut.length;t+=1)ut[t].c();E=p(),R=u("button"),R.textContent="fetch_insert_tag",x=p(),C=u("ul"),j=u("li"),O=u("a"),M=f(lt),S=p(),D=u("button"),D.textContent="fetch_delete_link",N=p(),B=u("button"),L=f(ct),F=p();for(let t=0;t<ht.length;t+=1)ht[t].c();I=p(),J=u("button"),J.textContent="like_increment_or_decrement",V=p(),K=u("div"),W=u("input"),X=p(),Z=u("button"),Z.textContent="fetch_insert_comment",tt=p(),et=u("ul");for(let t=0;t<dt.length;t+=1)dt[t].c();nt=p(),m(w,"class","svelte-1mb8pst"),m($,"list","autocomplete_list"),m($,"type","text"),m($,"name",""),m($,"id","hoge"),m($,"placeholder","tag"),m(A,"id","autocomplete_list"),m(k,"class","svelte-1mb8pst"),m(O,"href",P=t[69].link),m(O,"target","_blank"),m(O,"class","link_text svelte-1mb8pst"),m(W,"type","text"),m(W,"name",""),m(W,"id",""),m(W,"placeholder","comment"),m(K,"class","svelte-1mb8pst"),m(et,"class","comment_zone svelte-1mb8pst")},m(o,s){r(o,e,s),r(o,n,s),r(o,l,s),r(o,g,s),r(o,y,s),c(y,w);for(let t=0;t<st.length;t+=1)st[t]&&st[t].m(w,null);c(y,b),c(y,k),c(k,$),t[33]($),_($,t[6]),c(k,v),c(k,A);for(let t=0;t<ut.length;t+=1)ut[t]&&ut[t].m(A,null);c(k,E),c(k,R),c(y,x),c(y,C),c(C,j),c(j,O),c(O,M),c(j,S),c(j,D),c(y,N),c(y,B),c(B,L),c(y,F);for(let t=0;t<ht.length;t+=1)ht[t]&&ht[t].m(y,null);c(y,I),c(y,J),c(y,V),c(y,K),c(K,W),_(W,t[4]),c(K,X),c(K,Z),c(y,tt),c(y,et);for(let t=0;t<dt.length;t+=1)dt[t]&&dt[t].m(et,null);c(y,nt),ot||(at=[h($,"input",t[34]),h($,"input",t[21]),h(R,"click",(function(){a(t[20](t[69].id))&&t[20](t[69].id).apply(this,arguments)})),h(D,"click",(function(){a(t[14](t[69].id))&&t[14](t[69].id).apply(this,arguments)})),h(B,"click",ft),h(J,"click",(function(){a(t[15](t[69].id))&&t[15](t[69].id).apply(this,arguments)})),h(W,"input",t[36]),h(Z,"click",(function(){a(t[16](t[69].id))&&t[16](t[69].id).apply(this,arguments)}))],ot=!0)},p(e,n){if(t=e,16777217&n[0]){let e;for(rt=t[69].tags,e=0;e<rt.length;e+=1){const o=z(t,rt,e);st[e]?st[e].p(o,n):(st[e]=G(o),st[e].c(),st[e].m(w,null))}for(;e<st.length;e+=1)st[e].d(1);st.length=rt.length}if(64&n[0]&&$.value!==t[6]&&_($,t[6]),128&n[0]){let e;for(it=t[7],e=0;e<it.length;e+=1){const o=U(t,it,e);ut[e]?ut[e].p(o,n):(ut[e]=Q(o),ut[e].c(),ut[e].m(A,null))}for(;e<ut.length;e+=1)ut[e].d(1);ut.length=it.length}if(1&n[0]&&lt!==(lt=t[69].link+"")&&d(M,lt),1&n[0]&&P!==(P=t[69].link)&&m(O,"href",P),1&n[0]&&ct!==(ct=t[69].username+"")&&d(L,ct),1&n[0]){let e;for(pt=t[69].likes,e=0;e<pt.length;e+=1){const o=Y(t,pt,e);ht[e]?ht[e].p(o,n):(ht[e]=q(),ht[e].c(),ht[e].m(y,I))}for(;e<ht.length;e+=1)ht[e].d(1);ht.length=pt.length}if(16&n[0]&&W.value!==t[4]&&_(W,t[4]),34471969&n[0]){let e;for(mt=t[69].comments_and_replies,e=0;e<mt.length;e+=1){const o=T(t,mt,e);dt[e]?dt[e].p(o,n):(dt[e]=H(o),dt[e].c(),dt[e].m(et,null))}for(;e<dt.length;e+=1)dt[e].d(1);dt.length=mt.length}},d(a){a&&s(e),a&&s(n),a&&s(l),a&&s(g),a&&s(y),i(st,a),t[33](null),i(ut,a),i(ht,a),i(dt,a),ot=!1,o(at)}}}function J(e){let n,a,l,g,y,w,b,k,$,v,A,E,R,x,C,j,O,M,P,S,D,N,T,L,Y,U,z,G,Q,q,F=e[0],H=[];for(let t=0;t<F.length;t+=1)H[t]=I(B(e,F,t));return{c(){n=f("name: "),a=u("input"),l=f("\npassword: "),g=u("input"),y=p(),w=u("div"),b=f("link: "),k=u("input"),$=p(),v=u("button"),v.textContent="insert_link",A=p(),E=u("button"),E.textContent="CLEAR",R=p(),x=u("button"),C=f("ORDER_BY: "),j=f(e[9]),O=p(),M=u("button"),P=f("ORDER_BY_COLUMN: "),S=f(e[10]),D=p(),N=u("ul");for(let t=0;t<H.length;t+=1)H[t].c();var t,o,c,r;T=p(),L=u("br"),Y=p(),U=u("button"),U.textContent="toggle_footer",z=p(),G=u("footer"),G.innerHTML='<p>Version 0.0.0.1</p> \n  <p>client side hosting: </p><a href="https://taroyanaka.github.io/svelte/">https://taroyanaka.github.io/svelte/</a> \n  <p>server side hosting: </p><a href="https://glitch.com/edit/#!/spectrum-whip-sulfur?path=server.js%3A3%3A0">https://glitch.com/edit/#!/spectrum-whip-sulfur?path=server.js%3A3%3A0</a> \n  <p>client side source code: </p><p><a href="https://github.com/taroyanaka/svelte/">https://github.com/taroyanaka/svelte/</a> \n  </p><p>server side source code: </p><p><a href="https://github.com/taroyanaka/duct/">https://github.com/taroyanaka/duct/</a></p>',m(a,"type","text"),m(a,"placeholder","name"),m(g,"type","password"),m(g,"placeholder","password"),m(k,"type","text"),m(k,"placeholder","link_url"),m(k,"class","link"),m(v,"class","insert_link"),m(w,"class","svelte-1mb8pst"),m(G,"class","footer_open"),m(G,"id","footer"),t=G,o="display",null==(c="block")?t.style.removeProperty(o):t.style.setProperty(o,c,r?"important":"")},m(t,o){r(t,n,o),r(t,a,o),_(a,e[1]),r(t,l,o),r(t,g,o),_(g,e[2]),r(t,y,o),r(t,w,o),c(w,b),c(w,k),_(k,e[3]),c(w,$),c(w,v),c(w,A),c(w,E),c(w,R),c(w,x),c(x,C),c(x,j),c(w,O),c(w,M),c(M,P),c(M,S),r(t,D,o),r(t,N,o);for(let t=0;t<H.length;t+=1)H[t]&&H[t].m(N,null);r(t,T,o),r(t,L,o),r(t,Y,o),r(t,U,o),r(t,z,o),r(t,G,o),Q||(q=[h(a,"input",e[26]),h(g,"input",e[27]),h(k,"input",e[28]),h(v,"click",e[13]),h(E,"click",e[29]),h(x,"click",e[30]),h(M,"click",e[31]),h(U,"click",e[11])],Q=!0)},p(t,e){if(2&e[0]&&a.value!==t[1]&&_(a,t[1]),4&e[0]&&g.value!==t[2]&&_(g,t[2]),8&e[0]&&k.value!==t[3]&&_(k,t[3]),512&e[0]&&d(j,t[9]),1024&e[0]&&d(S,t[10]),54510065&e[0]){let n;for(F=t[0],n=0;n<F.length;n+=1){const o=B(t,F,n);H[n]?H[n].p(o,e):(H[n]=I(o),H[n].c(),H[n].m(N,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=F.length}},i:t,o:t,d(t){t&&s(n),t&&s(a),t&&s(l),t&&s(g),t&&s(y),t&&s(w),t&&s(D),t&&s(N),i(H,t),t&&s(T),t&&s(L),t&&s(Y),t&&s(U),t&&s(z),t&&s(G),Q=!1,o(q)}}}let V="https://spectrum-whip-sulfur.glitch.me/";function K(t,e,n){let o,a=[],l="user1",c="user_pass1",r="https://yanaka.dev/",s="comment1",i="reply1",u="tag1",f=[],p="",h="ASC",m="id",d="",_="",g="";const y=async({ORDER_BY_PARAM:t="DESC",ORDER_BY_COLUMN_PARAM:e="id",REQ_TAG_PARAM:o,USER_PARAM:l})=>{console.log(e);try{n(9,h=t),n(10,m=e),d=o,_=l;const c=()=>{const t=[];h&&t.push(`order_by=${h}`),m&&t.push(`order_by_column=${m}`),d&&t.push(`tag=${d}`),_&&t.push(`user=${_}`);return`${V+"read_all"}?${t.join("&")}`},r=await(await fetch(c())).json();if("fail"===r.result)throw new Error(r.error);const s=await(await fetch(c())).json();if(0===s.length)throw new Error("条件に一致するデータがありませんでした");n(0,a=s.message)}catch(t){console.log(t),t.message}},b=t=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),$=async t=>{try{200===t.status&&(g=t.result),"fail"===t.result||400===t.status?(()=>{throw new Error(t.message)})():await y({})}catch(t){(()=>{throw new Error(t.message)})()}},v=async()=>{const t=await(await fetch(V+"get_tags_for_autocomplete",b({name:l,password:c}))).json(),e=await t;n(7,f=await e.message)},A=async()=>{switch(!0){case"id"===m:n(10,m="created_at");break;case"created_at"===m:n(10,m="updated_at");break;default:n(10,m="id")}await y({ORDER_BY_PARAM:h,ORDER_BY_COLUMN_PARAM:m,REQ_TAG_PARAM:"TEST"})},E=async()=>{switch(!0){case"ASC"===h:n(9,h="DESC");break;case"DESC"===h:n(9,h="ASC");break;default:n(10,m="DESC")}await y({ORDER_BY_PARAM:h,ORDER_BY_COLUMN_PARAM:m})},R=async t=>{d=t,await y({REQ_TAG_PARAM:d})},x=async t=>{const e=t||"user1";await y({USER_PARAM:e})};w((async()=>{try{await y({}),await v()}catch(t){console.log(t)}}));return[a,l,c,r,s,i,u,f,p,h,m,()=>{const t=document.getElementById("footer");t.style=t.className.includes("footer_open")?"display: none;":"display: block;",t.className=t.className.includes("footer_open")?"footer_close":"footer_open"},y,async()=>{try{o=await(await fetch(V+"insert_link",b({name:l,password:c,link:r}))).json(),await $(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(V+"delete_link",b({name:l,password:c,id:t}))).json(),await $(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(V+"like_increment_or_decrement",b({name:l,password:c,link_id:t}))).json(),await $(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(V+"insert_comment",b({name:l,password:c,link_id:t,comment:s}))).json(),await $(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(V+"delete_comment",b({name:l,password:c,comment_id:t}))).json(),await $(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(V+"insert_comment_reply",b({name:l,password:c,comment_id:t,comment_reply:i}))).json(),await $(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(V+"delete_comment_reply",b({name:l,password:c,comment_reply_id:t}))).json(),await $(o)}catch(t){t.message}},async(t,e)=>{try{n(6,u=e||p.value),o=await(await fetch(V+"insert_tag",b({name:l,password:c,link_id:t,tag:u}))).json(),await $(o)}catch(t){t.message}},v,A,E,R,x,function(){l=this.value,n(1,l)},function(){c=this.value,n(2,c)},function(){r=this.value,n(3,r)},()=>y({}),()=>E(),()=>A(),t=>R(t.tag),function(t){k[t?"unshift":"push"]((()=>{p=t,n(8,p)}))},function(){u=this.value,n(6,u)},t=>x(t.username),function(){s=this.value,n(4,s)},(t,e)=>x(t[e].username),function(){i=this.value,n(5,i)},t=>x(t.username)]}return new class extends N{constructor(t){super(),D(this,t,K,J,l,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
