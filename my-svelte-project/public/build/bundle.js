var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function f(){return p(" ")}function h(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}let g;function y(t){g=t}function v(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const $=[],x=[];let b=[];const w=[],E=Promise.resolve();let k=!1;function A(t){b.push(t)}const j=new Set;let C=0;function O(){if(0!==C)return;const t=g;do{try{for(;C<$.length;){const t=$[C];C++,y(t),M(t.$$)}}catch(t){throw $.length=0,C=0,t}for(y(null),$.length=0,C=0;x.length;)x.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];j.has(e)||(j.add(e),e())}b.length=0}while($.length);for(;w.length;)w.pop()();k=!1,j.clear(),y(t)}function M(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const D=new Set;function S(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];b.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),b=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&($.push(t),k||(k=!0,E.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(r,c,i,s,u,p,f,h=[-1]){const d=g;y(r);const m=r.$$={fragment:null,ctx:[],props:p,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(d?d.$$.context:[])),callbacks:n(),dirty:h,skip_bound:!1,root:c.target||d.$$.root};f&&f(m.root);let _=!1;if(m.ctx=i?i(r,c.props||{},((t,e,...n)=>{const l=n.length?n[0]:e;return m.ctx&&u(m.ctx[t],m.ctx[t]=l)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](l),_&&B(r,t)),e})):[],m.update(),_=!0,l(m.before_update),m.fragment=!!s&&s(m.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);m.fragment&&m.fragment.l(t),t.forEach(a)}else m.fragment&&m.fragment.c();c.intro&&((v=r.$$.fragment)&&v.i&&(D.delete(v),v.i($))),function(t,n,r,c){const{fragment:i,after_update:a}=t.$$;i&&i.m(n,r),c||A((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):l(n),t.$$.on_mount=[]})),a.forEach(A)}(r,c.target,c.anchor,c.customElement),O()}var v,$;y(d)}class q{$destroy(){S(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Y(t,e,n){const l=t.slice();return l[52]=e[n],l[54]=n,l}function N(t,e,n){const l=t.slice();return l[55]=e[n],l[57]=n,l}function P(t,e,n){const l=t.slice();return l[58]=e[n],l[57]=n,l}function T(t,e,n){const l=t.slice();return l[52]=e[n],l[54]=n,l}function L(t,e,n){const l=t.slice();return l[52]=e[n],l[54]=n,l}function G(t,e,n){const l=t.slice();return l[62]=e[n],l[57]=n,l}function Q(t,e,n){const l=t.slice();return l[52]=e[n],l[54]=n,l}function z(e){let n,l,o;return{c(){n=u("button"),n.textContent="remove_error_message"},m(t,r){i(t,n,r),l||(o=h(n,"click",e[24]),l=!0)},p:t,d(t){t&&a(n),l=!1,o()}}}function F(t){let e,n,l,o,r=[t[52].ORDER_BY,t[52].ORDER_BY_COLUMN,t[52].REQ_TAG,t[52].USER].join("  ")+"";function s(){return t[34](t[52])}return{c(){e=u("button"),n=p(r)},m(t,r){i(t,e,r),c(e,n),l||(o=h(e,"click",s),l=!0)},p(e,n){t=e},d(t){t&&a(e),l=!1,o()}}}function J(t){let e,n,l,o=t[62].tag+"";return{c(){e=u("span"),n=p(o),l=p(", ")},m(t,o){i(t,e,o),c(e,n),c(e,l)},p(t,e){1&e[0]&&o!==(o=t[62].tag+"")&&m(n,o)},d(t){t&&a(e)}}}function H(t){let e,n;return{c(){e=u("option"),e.__value=n=t[52].tag,e.value=e.__value},m(t,n){i(t,e,n)},p(t,l){128&l[0]&&n!==(n=t[52].tag)&&(e.__value=n,e.value=e.__value)},d(t){t&&a(e)}}}function I(e){let n;return{c(){n=u("span"),n.textContent="😇"},m(t,e){i(t,n,e)},p:t,d(t){t&&a(n)}}}function K(t){let e,n,l,r,s,d,_,g,y,v,$,x,R=t[58].reply+"",b=t[58].username+"";return{c(){e=u("li"),n=p("reply: "),l=p(R),r=f(),s=u("li"),d=p("username: "),_=p(b),g=f(),y=u("button"),y.textContent="fetch_delete_comment_reply",v=f()},m(a,u){i(a,e,u),c(e,n),c(e,l),i(a,r,u),i(a,s,u),c(s,d),c(s,_),i(a,g,u),i(a,y,u),i(a,v,u),$||(x=h(y,"click",(function(){o(t[21](t[58].id))&&t[21](t[58].id).apply(this,arguments)})),$=!0)},p(e,n){t=e,1&n[0]&&R!==(R=t[58].reply+"")&&m(l,R),1&n[0]&&b!==(b=t[58].username+"")&&m(_,b)},d(t){t&&a(e),t&&a(r),t&&a(s),t&&a(g),t&&a(y),t&&a(v),$=!1,x()}}}function V(t){let e,n,r,g,y,v,$,x,R,b,w,E,k,A,j,C,O,M,D,S,B,U,q,Y,N,T,L,G,Q=t[55][t[57]].comment+"",z=t[55][t[57]].created_at+"",F=t[55][t[57]].updated_at+"",J=t[55][t[57]].username+"",H=t[55].comment_replies,I=[];for(let e=0;e<H.length;e+=1)I[e]=K(P(t,H,e));return{c(){e=u("li"),n=p("comment: "),r=p(Q),g=f(),y=u("li"),v=p("created_at: "),$=p(z),x=f(),R=u("button"),R.textContent="fetch_delete_comment",b=f(),w=u("li"),E=p("updated_at: "),k=p(F),A=f(),j=u("li"),C=p("username: "),O=p(J),M=f(),D=u("input"),S=f(),B=u("button"),B.textContent="fetch_insert_comment_reply",U=f(),q=u("li"),Y=p("comment_replies:\n\t\t\t\t"),N=u("ul");for(let t=0;t<I.length;t+=1)I[t].c();T=f(),d(D,"type","text"),d(D,"placeholder","comment_reply"),d(q,"class","reply_zone svelte-1bjmpqx")},m(l,a){i(l,e,a),c(e,n),c(e,r),i(l,g,a),i(l,y,a),c(y,v),c(y,$),i(l,x,a),i(l,R,a),i(l,b,a),i(l,w,a),c(w,E),c(w,k),i(l,A,a),i(l,j,a),c(j,C),c(j,O),i(l,M,a),i(l,D,a),_(D,t[5]),i(l,S,a),i(l,B,a),i(l,U,a),i(l,q,a),c(q,Y),c(q,N);for(let t=0;t<I.length;t+=1)I[t]&&I[t].m(N,null);i(l,T,a),L||(G=[h(R,"click",(function(){o(t[19](t[55][t[57]].id))&&t[19](t[55][t[57]].id).apply(this,arguments)})),h(D,"input",t[38]),h(B,"click",(function(){o(t[20](t[55][t[57]].id))&&t[20](t[55][t[57]].id).apply(this,arguments)}))],L=!0)},p(e,n){if(t=e,1&n[0]&&Q!==(Q=t[55][t[57]].comment+"")&&m(r,Q),1&n[0]&&z!==(z=t[55][t[57]].created_at+"")&&m($,z),1&n[0]&&F!==(F=t[55][t[57]].updated_at+"")&&m(k,F),1&n[0]&&J!==(J=t[55][t[57]].username+"")&&m(O,J),32&n[0]&&D.value!==t[5]&&_(D,t[5]),2097153&n[0]){let e;for(H=t[55].comment_replies,e=0;e<H.length;e+=1){const l=P(t,H,e);I[e]?I[e].p(l,n):(I[e]=K(l),I[e].c(),I[e].m(N,null))}for(;e<I.length;e+=1)I[e].d(1);I.length=H.length}},d(t){t&&a(e),t&&a(g),t&&a(y),t&&a(x),t&&a(R),t&&a(b),t&&a(w),t&&a(A),t&&a(j),t&&a(M),t&&a(D),t&&a(S),t&&a(B),t&&a(U),t&&a(q),s(I,t),t&&a(T),L=!1,l(G)}}}function W(t){let e,n,r,g,y,v,$,x,R,b,w,E,k,A,j,C,O,M,D,S,B,U,q,Y,P,Q,z,F,K,W,X,Z,tt,et,nt,lt=t[52].link+"",ot=t[52].created_at+"",rt=t[52].username+"",ct=t[52].tags,it=[];for(let e=0;e<ct.length;e+=1)it[e]=J(G(t,ct,e));let at=t[7],st=[];for(let e=0;e<at.length;e+=1)st[e]=H(L(t,at,e));let ut=Array(t[52].like_count),pt=[];for(let e=0;e<ut.length;e+=1)pt[e]=I(T(t,ut,e));let ft=t[52].comments_and_replies,ht=[];for(let e=0;e<ft.length;e+=1)ht[e]=V(N(t,ft,e));return{c(){e=u("li"),n=u("div"),r=p("tag: \n\t\t\t");for(let t=0;t<it.length;t+=1)it[t].c();g=f(),y=u("div"),v=u("input"),$=f(),x=u("datalist");for(let t=0;t<st.length;t+=1)st[t].c();R=f(),b=u("button"),b.textContent="fetch_insert_tag",w=f(),E=u("a"),k=p(lt),j=f(),C=u("div"),O=p("created_at: "),M=p(ot),D=f(),S=u("div"),B=p("username: "),U=p(rt),q=f();for(let t=0;t<pt.length;t+=1)pt[t].c();Y=f(),P=u("button"),P.textContent="like_increment_or_decrement",Q=f(),z=u("div"),F=u("input"),K=f(),W=u("button"),W.textContent="fetch_insert_comment",X=f(),Z=u("ul");for(let t=0;t<ht.length;t+=1)ht[t].c();tt=f(),d(n,"class","svelte-1bjmpqx"),d(v,"list","autocomplete_list"),d(v,"type","text"),d(v,"name",""),d(v,"id","hoge"),d(v,"placeholder","tag"),d(x,"id","autocomplete_list"),d(y,"class","svelte-1bjmpqx"),d(E,"href",A=t[52].link),d(E,"target","_blank"),d(C,"class","svelte-1bjmpqx"),d(S,"class","svelte-1bjmpqx"),d(F,"type","text"),d(F,"name",""),d(F,"id",""),d(F,"placeholder","comment"),d(z,"class","svelte-1bjmpqx"),d(Z,"class","comment_zone svelte-1bjmpqx")},m(l,a){i(l,e,a),c(e,n),c(n,r);for(let t=0;t<it.length;t+=1)it[t]&&it[t].m(n,null);c(e,g),c(e,y),c(y,v),t[35](v),_(v,t[6]),c(y,$),c(y,x);for(let t=0;t<st.length;t+=1)st[t]&&st[t].m(x,null);c(y,R),c(y,b),c(e,w),c(e,E),c(E,k),c(e,j),c(e,C),c(C,O),c(C,M),c(e,D),c(e,S),c(S,B),c(S,U),c(e,q);for(let t=0;t<pt.length;t+=1)pt[t]&&pt[t].m(e,null);c(e,Y),c(e,P),c(e,Q),c(e,z),c(z,F),_(F,t[4]),c(z,K),c(z,W),c(e,X),c(e,Z);for(let t=0;t<ht.length;t+=1)ht[t]&&ht[t].m(Z,null);c(e,tt),et||(nt=[h(v,"input",t[36]),h(v,"input",t[23]),h(b,"click",(function(){o(t[22](t[52].id))&&t[22](t[52].id).apply(this,arguments)})),h(P,"click",(function(){o(t[17](t[52].id))&&t[17](t[52].id).apply(this,arguments)})),h(F,"input",t[37]),h(W,"click",(function(){o(t[18](t[52].id))&&t[18](t[52].id).apply(this,arguments)}))],et=!0)},p(l,o){if(t=l,1&o[0]){let e;for(ct=t[52].tags,e=0;e<ct.length;e+=1){const l=G(t,ct,e);it[e]?it[e].p(l,o):(it[e]=J(l),it[e].c(),it[e].m(n,null))}for(;e<it.length;e+=1)it[e].d(1);it.length=ct.length}if(64&o[0]&&v.value!==t[6]&&_(v,t[6]),128&o[0]){let e;for(at=t[7],e=0;e<at.length;e+=1){const n=L(t,at,e);st[e]?st[e].p(n,o):(st[e]=H(n),st[e].c(),st[e].m(x,null))}for(;e<st.length;e+=1)st[e].d(1);st.length=at.length}if(1&o[0]&&lt!==(lt=t[52].link+"")&&m(k,lt),1&o[0]&&A!==(A=t[52].link)&&d(E,"href",A),1&o[0]&&ot!==(ot=t[52].created_at+"")&&m(M,ot),1&o[0]&&rt!==(rt=t[52].username+"")&&m(U,rt),1&o[0]){let n;for(ut=Array(t[52].like_count),n=0;n<ut.length;n+=1){const l=T(t,ut,n);pt[n]?pt[n].p(l,o):(pt[n]=I(),pt[n].c(),pt[n].m(e,Y))}for(;n<pt.length;n+=1)pt[n].d(1);pt.length=ut.length}if(16&o[0]&&F.value!==t[4]&&_(F,t[4]),3670049&o[0]){let e;for(ft=t[52].comments_and_replies,e=0;e<ft.length;e+=1){const n=N(t,ft,e);ht[e]?ht[e].p(n,o):(ht[e]=V(n),ht[e].c(),ht[e].m(Z,null))}for(;e<ht.length;e+=1)ht[e].d(1);ht.length=ft.length}},d(n){n&&a(e),s(it,n),t[35](null),s(st,n),s(pt,n),s(ht,n),et=!1,l(nt)}}}function X(e){let n,o,r,g,y,v,$,x,R,b,w,E,k,A,j,C,O,M,D,S,B,U,q,N,P,T,L,G,J,H,I,K=e[9]&&z(e),V=e[14],X=[];for(let t=0;t<V.length;t+=1)X[t]=F(Q(e,V,t));let Z=e[0],tt=[];for(let t=0;t<Z.length;t+=1)tt[t]=W(Y(e,Z,t));return{c(){n=u("div"),o=p(e[9]),r=f(),K&&K.c(),g=f(),y=u("div"),v=u("input"),$=f(),x=u("input"),R=f(),b=u("input"),w=f(),E=u("input"),k=f(),A=u("div"),j=u("input"),C=f(),O=u("input"),M=f(),D=u("input"),S=f(),B=u("button"),B.textContent="insert_link",U=f(),q=u("div"),N=u("button"),N.textContent="clear condition",P=f(),T=u("button"),T.textContent="user2",L=f();for(let t=0;t<X.length;t+=1)X[t].c();G=f(),J=u("ul");for(let t=0;t<tt.length;t+=1)tt[t].c();d(n,"class","svelte-1bjmpqx"),d(v,"type","text"),d(v,"placeholder","ORDER_BY"),d(x,"type","text"),d(x,"placeholder","ORDER_BY_COLUMN"),d(b,"type","text"),d(b,"placeholder","REQ_TAG"),d(E,"type","text"),d(E,"placeholder","USER"),d(y,"class","svelte-1bjmpqx"),d(j,"type","text"),d(j,"placeholder","name"),d(O,"type","text"),d(O,"placeholder","password"),d(D,"type","text"),d(D,"placeholder","link_url"),d(A,"class","svelte-1bjmpqx"),d(q,"class","svelte-1bjmpqx")},m(t,l){i(t,n,l),c(n,o),c(n,r),K&&K.m(n,null),i(t,g,l),i(t,y,l),c(y,v),_(v,e[10]),c(y,$),c(y,x),_(x,e[11]),c(y,R),c(y,b),_(b,e[12]),c(y,w),c(y,E),_(E,e[13]),i(t,k,l),i(t,A,l),c(A,j),_(j,e[1]),c(A,C),c(A,O),_(O,e[2]),c(A,M),c(A,D),_(D,e[3]),c(A,S),c(A,B),i(t,U,l),i(t,q,l),c(q,N),c(q,P),c(q,T),c(q,L);for(let t=0;t<X.length;t+=1)X[t]&&X[t].m(q,null);i(t,G,l),i(t,J,l);for(let t=0;t<tt.length;t+=1)tt[t]&&tt[t].m(J,null);H||(I=[h(v,"input",e[25]),h(x,"input",e[26]),h(b,"input",e[27]),h(E,"input",e[28]),h(j,"input",e[29]),h(O,"input",e[30]),h(D,"input",e[31]),h(B,"click",e[16]),h(N,"click",e[32]),h(T,"click",e[33])],H=!0)},p(t,e){if(512&e[0]&&m(o,t[9]),t[9]?K?K.p(t,e):(K=z(t),K.c(),K.m(n,null)):K&&(K.d(1),K=null),1024&e[0]&&v.value!==t[10]&&_(v,t[10]),2048&e[0]&&x.value!==t[11]&&_(x,t[11]),4096&e[0]&&b.value!==t[12]&&_(b,t[12]),8192&e[0]&&E.value!==t[13]&&_(E,t[13]),2&e[0]&&j.value!==t[1]&&_(j,t[1]),4&e[0]&&O.value!==t[2]&&_(O,t[2]),8&e[0]&&D.value!==t[3]&&_(D,t[3]),49152&e[0]){let n;for(V=t[14],n=0;n<V.length;n+=1){const l=Q(t,V,n);X[n]?X[n].p(l,e):(X[n]=F(l),X[n].c(),X[n].m(q,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=V.length}if(16646641&e[0]){let n;for(Z=t[0],n=0;n<Z.length;n+=1){const l=Y(t,Z,n);tt[n]?tt[n].p(l,e):(tt[n]=W(l),tt[n].c(),tt[n].m(J,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=Z.length}},i:t,o:t,d(t){t&&a(n),K&&K.d(),t&&a(g),t&&a(y),t&&a(k),t&&a(A),t&&a(U),t&&a(q),s(X,t),t&&a(G),t&&a(J),s(tt,t),H=!1,l(I)}}}function Z(t,e,n){let l,o=[],r="user1",c="user_pass1",i="https://yanaka.dev/",a="comment1",s="reply1",u="tag1",p=[],f="",h="",d="DESC",m="links.id",_="",g="";const y=R.xprod(["tag1","tag2","tag3"],["user1","user2","user3"]),$=R.xprod(["links.id","like_count"],y),b=R.xprod(["DESC","ASC"],$).map((t=>R.flatten(t))).map((t=>({ORDER_BY:t[0],ORDER_BY_COLUMN:t[1],REQ_TAG:t[2],USER:t[3]}))),w=async({ORDER_BY_PARAM:t="DESC",ORDER_BY_COLUMN_PARAM:e="links.id",REQ_TAG_PARAM:l,USER_PARAM:r})=>{try{console.log(t,e,l,r),n(10,d=t),n(11,m=e),n(12,_=l),n(13,g=r);const c=()=>{const t=[];d&&t.push(`order_by=${d}`),m&&t.push(`order_by_column=${m}`),_&&t.push(`tag=${_}`),g&&t.push(`user=${g}`);return`http://localhost:8000/read_all?${t.join("&")}`},i=await(await fetch(c())).json();if("fail"===i.result)throw new Error(i.error);const a=await(await fetch(c())).json();if(0===a.length)throw new Error("条件に一致するデータがありませんでした");n(0,o=a)}catch(t){console.log(t),n(9,h=t.message)}},E=t=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),k=async()=>{const t=(await fetch("http://localhost:8000/get_tags_for_autocomplete",E({name:r,password:c}))).json(),e=await t;n(7,p=await e.tags)};v((async()=>{try{await w({}),await k()}catch(t){console.log(t)}}));return[o,r,c,i,a,s,u,p,f,h,d,m,_,g,b,w,async()=>{try{l=await(await fetch("http://localhost:8000/insert_link",E({name:r,password:c,link:i}))).json(),"fail"===l.result?(()=>{throw new Error(l.error)})():w({}),console.log(l.result)}catch(t){n(9,h=t.message)}},async t=>l=(await fetch("http://localhost:8000/like_increment_or_decrement",E({name:r,password:c,link_id:t}))).json(),async t=>l=(await fetch("http://localhost:8000/insert_comment",E({name:r,password:c,link_id:t,comment:a}))).json(),async t=>l=(await fetch("http://localhost:8000/delete_comment",E({name:r,password:c,comment_id:t}))).json(),async t=>l=(await fetch("http://localhost:8000/insert_comment_reply",E({name:r,password:c,comment_id:t,comment_reply:s}))).json(),async t=>l=(await fetch("http://localhost:8000/delete_comment_reply",E({name:r,password:c,comment_reply_id:t}))).json(),async t=>{try{n(6,u=f.value),console.log(u),l=await(await fetch("http://localhost:8000/insert_tag",E({name:r,password:c,link_id:t,tag:u}))).json(),"fail"===l.result?(()=>{throw new Error(l.error)})():w({}),console.log(l.result)}catch(t){n(9,h=t.message)}},k,()=>n(9,h=""),function(){d=this.value,n(10,d)},function(){m=this.value,n(11,m)},function(){_=this.value,n(12,_)},function(){g=this.value,n(13,g)},function(){r=this.value,n(1,r)},function(){c=this.value,n(2,c)},function(){i=this.value,n(3,i)},()=>w({}),()=>w({USER_PARAM:"user2"}),t=>w({ORDER_BY_PARAM:t.ORDER_BY,ORDER_BY_COLUMN_PARAM:t.ORDER_BY_COLUMN,REQ_TAG_PARAM:t.REQ_TAG,USER_PARAM:t.USER}),function(t){x[t?"unshift":"push"]((()=>{f=t,n(8,f)}))},function(){u=this.value,n(6,u)},function(){a=this.value,n(4,a)},function(){s=this.value,n(5,s)}]}return new class extends q{constructor(t){super(),U(this,t,Z,X,r,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
