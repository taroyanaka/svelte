var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function i(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function s(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function g(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function F(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){n=""+n,t.data!==n&&(t.data=n)}let m;function p(t){m=t}function _(t){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(t)}const N=[],$=[];let b=[];const T=[],y=Promise.resolve();let U=!1;function k(t){b.push(t)}const A=new Set;let E=0;function L(){if(0!==E)return;const t=m;do{try{for(;E<N.length;){const t=N[E];E++,p(t),v(t.$$)}}catch(t){throw N.length=0,E=0,t}for(p(null),N.length=0,E=0;$.length;)$.pop()();for(let t=0;t<b.length;t+=1){const n=b[t];A.has(n)||(A.add(n),n())}b.length=0}while(N.length);for(;T.length;)T.pop()();U=!1,A.clear(),p(t)}function v(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const M=new Set;function O(t,n){const e=t.$$;null!==e.fragment&&(!function(t){const n=[],e=[];b.forEach((o=>-1===t.indexOf(o)?n.push(o):e.push(o))),e.forEach((t=>t())),b=n}(e.after_update),o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function x(t,n){-1===t.$$.dirty[0]&&(N.push(t),U||(U=!0,y.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function P(c,l,u,f,s,a,d,g=[-1]){const F=m;p(c);const h=c.$$={fragment:null,ctx:[],props:a,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(F?F.$$.context:[])),callbacks:e(),dirty:g,skip_bound:!1,root:l.target||F.$$.root};d&&d(h.root);let _=!1;if(h.ctx=u?u(c,l.props||{},((t,n,...e)=>{const o=e.length?e[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),_&&x(c,t)),n})):[],h.update(),_=!0,o(h.before_update),h.fragment=!!f&&f(h.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();l.intro&&((N=c.$$.fragment)&&N.i&&(M.delete(N),N.i($))),function(t,e,c,l){const{fragment:u,after_update:i}=t.$$;u&&u.m(e,c),l||k((()=>{const e=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...e):o(e),t.$$.on_mount=[]})),i.forEach(k)}(c,l.target,l.anchor,l.customElement),L()}var N,$;p(F)}class K{$destroy(){O(this,1),this.$destroy=t}$on(n,e){if(!r(e))return t;const o=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function w(t,n,e){const o=t.slice();return o[25]=n[e],o}function C(t,n,e){const o=t.slice();return o[28]=n[e],o[30]=e,o}function S(t,n,e){const o=t.slice();return o[31]=n[e],o[33]=e,o}function j(t){let n;return{c(){n=s("div"),n.textContent="GOAL"},m(t,e){u(t,n,e)},d(t){t&&i(n)}}}function G(t){let n,e;return{c(){n=s("div"),e=a(t[2])},m(t,o){u(t,n,o),l(n,e)},p(t,n){4&n[0]&&h(e,t[2])},d(t){t&&i(n)}}}function B(t){let n,e,r,c,f;function d(){return t[10](t[30],t[33])}function h(){return t[11](t[30],t[33])}return{c(){n=s("span"),e=a("□"),F(n,"style",r=t[31][3])},m(t,o){u(t,n,o),l(n,e),c||(f=[g(n,"keydown",d),g(n,"click",h)],c=!0)},p(e,o){t=e,8&o[0]&&r!==(r=t[31][3])&&F(n,"style",r)},d(t){t&&i(n),c=!1,o(f)}}}function V(t){let n,e,o=t[28],r=[];for(let n=0;n<o.length;n+=1)r[n]=B(S(t,o,n));return{c(){n=s("li");for(let t=0;t<r.length;t+=1)r[t].c();e=d(),F(n,"class","CELL")},m(t,o){u(t,n,o);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(n,null);l(n,e)},p(t,c){if(72&c[0]){let l;for(o=t[28],l=0;l<o.length;l+=1){const u=S(t,o,l);r[l]?r[l].p(u,c):(r[l]=B(u),r[l].c(),r[l].m(n,e))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}},d(t){t&&i(n),f(r,t)}}}function D(t){let n,e,o,r,c,f,d=t[5][t[25]].NAME+"",g=t[5][t[25]].LFP+"",F=t[5][t[25]].ATK+"";return{c(){n=s("div"),e=a(d),o=a(" LFP: "),r=a(g),c=a(" ATK: "),f=a(F)},m(t,i){u(t,n,i),l(n,e),l(n,o),l(n,r),l(n,c),l(n,f)},p(t,n){32&n[0]&&d!==(d=t[5][t[25]].NAME+"")&&h(e,d),32&n[0]&&g!==(g=t[5][t[25]].LFP+"")&&h(r,g),32&n[0]&&F!==(F=t[5][t[25]].ATK+"")&&h(f,F)},d(t){t&&i(n)}}}function I(n){let e,r,c,F,m,p,_,N,$,b,T,y,U,k,A,E,L,v,M,O,x,P,K,R,S,B,I=n[4][0].NAME+"",q=n[4][0].LFP+"",z=n[4][0].ATK+"",Y=n[1]&&j(),H=n[2]&&G(n),J=n[3],Q=[];for(let t=0;t<J.length;t+=1)Q[t]=V(C(n,J,t));let W=Object.keys(n[5]),X=[];for(let t=0;t<W.length;t+=1)X[t]=D(w(n,W,t));return{c(){e=s("div"),r=d(),Y&&Y.c(),c=d(),H&&H.c(),F=d(),m=s("div"),p=a("PICKEL: "),_=a(n[0]),N=d(),$=s("ul");for(let t=0;t<Q.length;t+=1)Q[t].c();b=d(),T=s("div"),y=s("div"),U=a(I),k=a(" LFP: "),A=a(q),E=a(" ATK: "),L=a(z),v=d();for(let t=0;t<X.length;t+=1)X[t].c();M=d(),O=s("button"),O.textContent="get_USR_position",x=d(),P=s("button"),P.textContent="get_UNT_position",K=d(),R=s("button"),R.textContent="UNT_ATTACK_OR_MOVE"},m(t,o){u(t,e,o),u(t,r,o),Y&&Y.m(t,o),u(t,c,o),H&&H.m(t,o),u(t,F,o),u(t,m,o),l(m,p),l(m,_),u(t,N,o),u(t,$,o);for(let t=0;t<Q.length;t+=1)Q[t]&&Q[t].m($,null);u(t,b,o),u(t,T,o),l(T,y),l(y,U),l(y,k),l(y,A),l(y,E),l(y,L),l(T,v);for(let t=0;t<X.length;t+=1)X[t]&&X[t].m(T,null);u(t,M,o),u(t,O,o),u(t,x,o),u(t,P,o),u(t,K,o),u(t,R,o),S||(B=[g(O,"click",n[12]),g(P,"click",n[13]),g(R,"click",n[14])],S=!0)},p(t,n){if(t[1]?Y||(Y=j(),Y.c(),Y.m(c.parentNode,c)):Y&&(Y.d(1),Y=null),t[2]?H?H.p(t,n):(H=G(t),H.c(),H.m(F.parentNode,F)):H&&(H.d(1),H=null),1&n[0]&&h(_,t[0]),72&n[0]){let e;for(J=t[3],e=0;e<J.length;e+=1){const o=C(t,J,e);Q[e]?Q[e].p(o,n):(Q[e]=V(o),Q[e].c(),Q[e].m($,null))}for(;e<Q.length;e+=1)Q[e].d(1);Q.length=J.length}if(16&n[0]&&I!==(I=t[4][0].NAME+"")&&h(U,I),16&n[0]&&q!==(q=t[4][0].LFP+"")&&h(A,q),16&n[0]&&z!==(z=t[4][0].ATK+"")&&h(L,z),32&n[0]){let e;for(W=Object.keys(t[5]),e=0;e<W.length;e+=1){const o=w(t,W,e);X[e]?X[e].p(o,n):(X[e]=D(o),X[e].c(),X[e].m(T,null))}for(;e<X.length;e+=1)X[e].d(1);X.length=W.length}},i:t,o:t,d(t){t&&i(e),t&&i(r),Y&&Y.d(t),t&&i(c),H&&H.d(t),t&&i(F),t&&i(m),t&&i(N),t&&i($),f(Q,t),t&&i(b),t&&i(T),f(X,t),t&&i(M),t&&i(O),t&&i(x),t&&i(P),t&&i(K),t&&i(R),S=!1,o(B)}}}function q(t,n,e){let o=[5,5],r=0,c=!1,l="",u=[],i=[],f=[{NAME:"USR",LFP:5,ATK:1}],s={UNT_NUM_0:{NAME:"UNT",LFP:3,ATK:1},UNT_NUM_1:{NAME:"UNT",LFP:2,ATK:2}};const a=(t,n)=>{o=[t,n];const e=[[n,n-1],[n,n+1],[n-1,n],[n+1,n]];return u=e,console.log(o[0],o[1],u),e},d=(t,n)=>{e(3,i[t][n][2]="NON",i),e(3,i[t][n][3]="background-color: #FFFFFF",i)};function g(t){const n={w:[-1,0],a:[0,-1],s:[1,0],d:[0,1]};if("t"===t.key)return void((t,n,r)=>{const c="UNT_NUM_"+t.toString(),l=f[0].ATK;if(e(5,s[c].LFP-=l,s),s[c].LFP<=0){const t=[o[0]+n,o[1]+r];d(t[0],t[1]),e(3,i[t[0]][t[1]][3]="background-color: #FFFFFF",i),e(3,i[t[0]][t[1]][4]="",i),e(5,s=R.omit([c],s))}})(0,-1,0);if("g"===t.key)return void m(0);if("b"===t.key)return void m(1);const l=[o[0]+n[t.key][0],o[1]+n[t.key][1]];"BLC"===i[l[0]][l[1]][2]&&(e(0,r+=1),d(l[0],l[1])),"USR"!==i[l[0]][l[1]][2]&&("GOL"===i[l[0]][l[1]][2]&&(e(1,c=!0),document.removeEventListener("keypress",g),setTimeout((()=>{p({when_mounted_time:!1})}),1e3)),"NON"===i[l[0]][l[1]][2]&&(e(3,i[l[0]][l[1]][2]="USR",i),e(3,i[o[0]][o[1]][2]="NON",i),e(3,i[l[0]][l[1]][3]="background-color: #0000FF",i),e(3,i[o[0]][o[1]][3]="background-color: #FFFFFF",i),console.log("COLLECT_VALUE2[go_to_y_x[0]][go_to_y_x[1]]",i[l[0]][l[1]]),o=l))}const F=()=>{const t=i.map((t=>t.filter((t=>"USR"===t[2])))).flat().map((t=>t.slice(0,2)));return console.log(t),t},h=(t=0)=>{t.toString();const n=i.map((t=>t.filter((t=>"UNT"===t[2])))).flat().map((t=>t.slice(0,2)));return console.log(n),n},m=(t=0)=>{const n=F(),o=h(t);if(o[0][0]===n[0][0]&&o[0][1]===n[0][1]-1||o[0][0]===n[0][0]&&o[0][1]===n[0][1]+1||o[0][0]===n[0][0]-1&&o[0][1]===n[0][1]||o[0][0]===n[0][0]+1&&o[0][1]===n[0][1])return void(t=>{const n="UNT_NUM_"+t.toString(),o=s[n].ATK;e(4,f[0].LFP-=o,f),f[0].LFP<=0&&(e(2,l="YOU DIED, GAME OVER"),setTimeout((()=>{p({when_mounted_time:!1})}),1e3))})(t);[[o[0][0],o[0][1]-1],[o[0][0],o[0][1]+1],[o[0][0]-1,o[0][1]],[o[0][0]+1,o[0][1]]].forEach((n=>{if("NON"===i[n[0]][n[1]][2])return d(o[0][0],o[0][1]),e(3,i[o[0][0]][o[0][1]][3]="background-color: #FFFFFF",i),e(3,i[o[0][0]][o[0][1]][4]="",i),e(3,i[n[0]][n[1]][2]="UNT",i),e(3,i[n[0]][n[1]][3]="background-color: #00FF00",i),void e(3,i[n[0]][n[1]][4]=s["UNT_NUM_"+t.toString()],i)}))},p=({when_mounted_time:t=!0})=>{if(!1===t){if(!confirm("Again？"))return;p({when_mounted_time:!0})}var n,a;e(3,i=R.xprod(R.range(0,10),R.range(0,10)).map((t=>t.concat(["BLC"]))).map((t=>t.concat(["background-color: #808080"])))),e(3,i=R.splitEvery(10,i)),e(3,i[5][5][2]="USR",i),e(3,i[5][5][3]="background-color: #0000FF",i),e(2,l=""),e(4,f=[{NAME:"USR",LFP:5,ATK:1}]),e(5,s={UNT_NUM_0:{NAME:"UNT",LFP:3,ATK:1},UNT_NUM_1:{NAME:"UNT",LFP:2,ATK:2}}),a=9,e(3,i[n=0][a][2]="GOL",i),e(3,i[n][a][3]="background-color: #FFFF00",i),e(0,r=0),e(1,c=!1),u=[],o=[5,5],((t=30)=>{const n=i.map((t=>t.filter((t=>"BLC"===t[2])))).flat().length,e=Math.floor(n*(t/100));for(let t=0;t<e;t++){const t=[shuffle([0,1,2,3,4,5,6,7,8,9])[0],shuffle([0,1,2,3,4,5,6,7,8,9])[0]];"USR"!==i[t[0]][t[1]][2]&&"GOL"!==i[t[0]][t[1]][2]&&d(t[0],t[1])}})(),e(3,i[5][4][2]="NON",i),e(3,i[5][4][3]="background-color: #FFFFFF",i),e(3,i[5][6][2]="NON",i),e(3,i[5][6][3]="background-color: #FFFFFF",i),e(3,i[4][5][2]="NON",i),e(3,i[4][5][3]="background-color: #FFFFFF",i),e(3,i[6][5][2]="NON",i),e(3,i[6][5][3]="background-color: #FFFFFF",i),e(3,i[5][4][2]="UNT",i),e(3,i[5][4][3]="background-color: #00FF00",i),e(3,i[5][4][4]=s.UNT_NUM_0,i),e(3,i[5][6][2]="UNT",i),e(3,i[5][6][3]="background-color: #00FF00",i),e(3,i[5][6][4]=s.UNT_NUM_1,i),document.addEventListener("keypress",g)};_((async()=>{try{p({when_mounted_time:!0})}catch(t){console.log(t)}}));return[r,c,l,i,f,s,a,F,h,m,(t,n)=>a(t,n),(t,n)=>a(t,n),()=>F(),()=>h(),()=>m()]}return new class extends K{constructor(t){super(),P(this,t,q,I,c,{},null,[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
