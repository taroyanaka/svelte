var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function a(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode&&t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function d(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}let g;function y(t){g=t}function w(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const b=[],$=[];let k=[];const v=[],E=Promise.resolve();let A=!1;function R(t){k.push(t)}const x=new Set;let C=0;function O(){if(0!==C)return;const t=g;do{try{for(;C<b.length;){const t=b[C];C++,y(t),M(t.$$)}}catch(t){throw b.length=0,C=0,t}for(y(null),b.length=0,C=0;$.length;)$.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];x.has(e)||(x.add(e),e())}k.length=0}while(b.length);for(;v.length;)v.pop()();A=!1,x.clear(),y(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const j=new Set;function S(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),k=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(b.push(t),A||(A=!0,E.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(l,c,r,s,u,f,h,m=[-1]){const p=g;y(l);const d=l.$$={fragment:null,ctx:[],props:f,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:m,skip_bound:!1,root:c.target||p.$$.root};h&&h(d.root);let _=!1;if(d.ctx=r?r(l,c.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return d.ctx&&u(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),_&&P(l,t)),e})):[],d.update(),_=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);d.fragment&&d.fragment.l(t),t.forEach(i)}else d.fragment&&d.fragment.c();c.intro&&((w=l.$$.fragment)&&w.i&&(j.delete(w),w.i(b))),function(t,n,l,c){const{fragment:r,after_update:i}=t.$$;r&&r.m(n,l),c||R((()=>{const n=t.$$.on_mount.map(e).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),i.forEach(R)}(l,c.target,c.anchor,c.customElement),O()}var w,b;y(p)}class B{$destroy(){S(this,1),this.$destroy=t}$on(e,n){if(!a(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function N(t,e,n){const o=t.slice();return o[68]=e[n],o[70]=n,o}function T(t,e,n){const o=t.slice();return o[71]=e[n],o[73]=n,o}function L(t,e,n){const o=t.slice();return o[74]=e[n],o[73]=n,o}function Y(t,e,n){const o=t.slice();return o[68]=e[n],o[70]=n,o}function U(t,e,n){const o=t.slice();return o[68]=e[n],o[70]=n,o}function z(t,e,n){const o=t.slice();return o[78]=e[n],o[73]=n,o}function G(t){let e,n,o,a,l=t[78].tag+"";function s(){return t[31](t[78])}return{c(){e=u("button"),n=f(l)},m(t,l){r(t,e,l),c(e,n),o||(a=m(e,"click",s),o=!0)},p(e,o){t=e,1&o[0]&&l!==(l=t[78].tag+"")&&d(n,l)},d(t){t&&i(e),o=!1,a()}}}function Q(t){let e,n;return{c(){e=u("option"),e.__value=n=t[68].tag,e.value=e.__value},m(t,n){r(t,e,n)},p(t,o){128&o[0]&&n!==(n=t[68].tag)&&(e.__value=n,e.value=e.__value)},d(t){t&&i(e)}}}function q(e){let n;return{c(){n=u("span"),n.textContent="😇"},m(t,e){r(t,n,e)},p:t,d(t){t&&i(n)}}}function F(t){let e,n,l,s,p,_,g,y,w,b,$=t[74].reply+"",k=t[74].username+"";function v(){return t[38](t[74])}return{c(){e=u("li"),n=f($),l=h(),s=u("button"),p=f(k),_=h(),g=u("button"),g.textContent="fetch_delete_comment_reply",y=h()},m(o,i){r(o,e,i),c(e,n),c(e,l),c(e,s),c(s,p),c(e,_),c(e,g),r(o,y,i),w||(b=[m(s,"click",v),m(g,"click",(function(){a(t[18](t[74].id))&&t[18](t[74].id).apply(this,arguments)}))],w=!0)},p(e,o){t=e,1&o[0]&&$!==($=t[74].reply+"")&&d(n,$),1&o[0]&&k!==(k=t[74].username+"")&&d(p,k)},d(t){t&&i(e),t&&i(y),w=!1,o(b)}}}function H(t){let e,n,l,g,y,w,b,$,k,v,E,A,R,x,C,O,M,j=t[71][t[73]].comment+"",S=t[71][t[73]].username+"";function P(){return t[36](t[71],t[73])}let D=t[71].comment_replies,B=[];for(let e=0;e<D.length;e+=1)B[e]=F(L(t,D,e));return{c(){e=u("li"),n=f(j),l=h(),g=u("button"),y=f(S),w=h(),b=u("button"),b.textContent="fetch_delete_comment",$=h(),k=u("input"),v=h(),E=u("button"),E.textContent="fetch_insert_comment_reply",A=h(),R=u("li"),x=u("ul");for(let t=0;t<B.length;t+=1)B[t].c();C=h(),p(k,"type","text"),p(k,"placeholder","comment_reply"),p(R,"class","reply_zone svelte-1mb8pst")},m(o,i){r(o,e,i),c(e,n),c(e,l),c(e,g),c(g,y),c(e,w),c(e,b),r(o,$,i),r(o,k,i),_(k,t[5]),r(o,v,i),r(o,E,i),r(o,A,i),r(o,R,i),c(R,x);for(let t=0;t<B.length;t+=1)B[t]&&B[t].m(x,null);r(o,C,i),O||(M=[m(g,"click",P),m(b,"click",(function(){a(t[16](t[71][t[73]].id))&&t[16](t[71][t[73]].id).apply(this,arguments)})),m(k,"input",t[37]),m(E,"click",(function(){a(t[17](t[71][t[73]].id))&&t[17](t[71][t[73]].id).apply(this,arguments)}))],O=!0)},p(e,o){if(t=e,1&o[0]&&j!==(j=t[71][t[73]].comment+"")&&d(n,j),1&o[0]&&S!==(S=t[71][t[73]].username+"")&&d(y,S),32&o[0]&&k.value!==t[5]&&_(k,t[5]),17039361&o[0]){let e;for(D=t[71].comment_replies,e=0;e<D.length;e+=1){const n=L(t,D,e);B[e]?B[e].p(n,o):(B[e]=F(n),B[e].c(),B[e].m(x,null))}for(;e<B.length;e+=1)B[e].d(1);B.length=D.length}},d(t){t&&i(e),t&&i($),t&&i(k),t&&i(v),t&&i(E),t&&i(A),t&&i(R),s(B,t),t&&i(C),O=!1,o(M)}}}function J(t){let e,n,l,g,y,w,b,$,k,v,E,A,R,x,C,O,M,j,S,P,D,B,N,L,F,J,V,I,K,W,X,Z,tt,et,nt,ot,at,lt=t[68].link+"",ct=t[68].username+"",rt=t[68].tags,it=[];for(let e=0;e<rt.length;e+=1)it[e]=G(z(t,rt,e));let st=t[7],ut=[];for(let e=0;e<st.length;e+=1)ut[e]=Q(U(t,st,e));function ft(){return t[34](t[68])}let ht=t[68].likes,mt=[];for(let e=0;e<ht.length;e+=1)mt[e]=q(Y(t,ht,e));let pt=t[68].comments_and_replies,dt=[];for(let e=0;e<pt.length;e+=1)dt[e]=H(T(t,pt,e));return{c(){e=u("br"),n=h(),l=u("br"),g=h(),y=u("li"),w=u("div");for(let t=0;t<it.length;t+=1)it[t].c();b=h(),$=u("div"),k=u("input"),v=h(),E=u("datalist");for(let t=0;t<ut.length;t+=1)ut[t].c();A=h(),R=u("button"),R.textContent="fetch_insert_tag",x=h(),C=u("ul"),O=u("li"),M=u("a"),j=f(lt),P=h(),D=u("button"),D.textContent="fetch_delete_link",B=h(),N=u("button"),L=f(ct),F=h();for(let t=0;t<mt.length;t+=1)mt[t].c();J=h(),V=u("button"),V.textContent="like_increment_or_decrement",I=h(),K=u("div"),W=u("input"),X=h(),Z=u("button"),Z.textContent="fetch_insert_comment",tt=h(),et=u("ul");for(let t=0;t<dt.length;t+=1)dt[t].c();nt=h(),p(w,"class","svelte-1mb8pst"),p(k,"list","autocomplete_list"),p(k,"type","text"),p(k,"name",""),p(k,"id","hoge"),p(k,"placeholder","tag"),p(E,"id","autocomplete_list"),p($,"class","svelte-1mb8pst"),p(M,"href",S=t[68].link),p(M,"target","_blank"),p(M,"class","link_text svelte-1mb8pst"),p(W,"type","text"),p(W,"name",""),p(W,"id",""),p(W,"placeholder","comment"),p(K,"class","svelte-1mb8pst"),p(et,"class","comment_zone svelte-1mb8pst")},m(o,i){r(o,e,i),r(o,n,i),r(o,l,i),r(o,g,i),r(o,y,i),c(y,w);for(let t=0;t<it.length;t+=1)it[t]&&it[t].m(w,null);c(y,b),c(y,$),c($,k),t[32](k),_(k,t[6]),c($,v),c($,E);for(let t=0;t<ut.length;t+=1)ut[t]&&ut[t].m(E,null);c($,A),c($,R),c(y,x),c(y,C),c(C,O),c(O,M),c(M,j),c(O,P),c(O,D),c(y,B),c(y,N),c(N,L),c(y,F);for(let t=0;t<mt.length;t+=1)mt[t]&&mt[t].m(y,null);c(y,J),c(y,V),c(y,I),c(y,K),c(K,W),_(W,t[4]),c(K,X),c(K,Z),c(y,tt),c(y,et);for(let t=0;t<dt.length;t+=1)dt[t]&&dt[t].m(et,null);c(y,nt),ot||(at=[m(k,"input",t[33]),m(k,"input",t[20]),m(R,"click",(function(){a(t[19](t[68].id))&&t[19](t[68].id).apply(this,arguments)})),m(D,"click",(function(){a(t[13](t[68].id))&&t[13](t[68].id).apply(this,arguments)})),m(N,"click",ft),m(V,"click",(function(){a(t[14](t[68].id))&&t[14](t[68].id).apply(this,arguments)})),m(W,"input",t[35]),m(Z,"click",(function(){a(t[15](t[68].id))&&t[15](t[68].id).apply(this,arguments)}))],ot=!0)},p(e,n){if(t=e,8388609&n[0]){let e;for(rt=t[68].tags,e=0;e<rt.length;e+=1){const o=z(t,rt,e);it[e]?it[e].p(o,n):(it[e]=G(o),it[e].c(),it[e].m(w,null))}for(;e<it.length;e+=1)it[e].d(1);it.length=rt.length}if(64&n[0]&&k.value!==t[6]&&_(k,t[6]),128&n[0]){let e;for(st=t[7],e=0;e<st.length;e+=1){const o=U(t,st,e);ut[e]?ut[e].p(o,n):(ut[e]=Q(o),ut[e].c(),ut[e].m(E,null))}for(;e<ut.length;e+=1)ut[e].d(1);ut.length=st.length}if(1&n[0]&&lt!==(lt=t[68].link+"")&&d(j,lt),1&n[0]&&S!==(S=t[68].link)&&p(M,"href",S),1&n[0]&&ct!==(ct=t[68].username+"")&&d(L,ct),1&n[0]){let e;for(ht=t[68].likes,e=0;e<ht.length;e+=1){const o=Y(t,ht,e);mt[e]?mt[e].p(o,n):(mt[e]=q(),mt[e].c(),mt[e].m(y,J))}for(;e<mt.length;e+=1)mt[e].d(1);mt.length=ht.length}if(16&n[0]&&W.value!==t[4]&&_(W,t[4]),17236001&n[0]){let e;for(pt=t[68].comments_and_replies,e=0;e<pt.length;e+=1){const o=T(t,pt,e);dt[e]?dt[e].p(o,n):(dt[e]=H(o),dt[e].c(),dt[e].m(et,null))}for(;e<dt.length;e+=1)dt[e].d(1);dt.length=pt.length}},d(a){a&&i(e),a&&i(n),a&&i(l),a&&i(g),a&&i(y),s(it,a),t[32](null),s(ut,a),s(mt,a),s(dt,a),ot=!1,o(at)}}}function V(e){let n,a,l,g,y,w,b,$,k,v,E,A,R,x,C,O,M,j,S,P,D,B,T,L,Y,U,z=e[0],G=[];for(let t=0;t<z.length;t+=1)G[t]=J(N(e,z,t));return{c(){n=f("name: "),a=u("input"),l=f("\npassword: "),g=u("input"),y=h(),w=u("div"),b=f("link: "),$=u("input"),k=h(),v=u("button"),v.textContent="insert_link",E=h(),A=u("button"),A.textContent="CLEAR",R=h(),x=u("button"),C=f("ORDER_BY: "),O=f(e[9]),M=h(),j=u("button"),S=f("ORDER_BY_COLUMN: "),P=f(e[10]),D=h(),B=u("ul");for(let t=0;t<G.length;t+=1)G[t].c();T=h(),L=u("footer"),L.innerHTML="<p>Version 0.0.0.1</p>",p(a,"type","text"),p(a,"placeholder","name"),p(g,"type","password"),p(g,"placeholder","password"),p($,"type","text"),p($,"placeholder","link_url"),p($,"class","link"),p(v,"class","insert_link"),p(w,"class","svelte-1mb8pst")},m(t,o){r(t,n,o),r(t,a,o),_(a,e[1]),r(t,l,o),r(t,g,o),_(g,e[2]),r(t,y,o),r(t,w,o),c(w,b),c(w,$),_($,e[3]),c(w,k),c(w,v),c(w,E),c(w,A),c(w,R),c(w,x),c(x,C),c(x,O),c(w,M),c(w,j),c(j,S),c(j,P),r(t,D,o),r(t,B,o);for(let t=0;t<G.length;t+=1)G[t]&&G[t].m(B,null);r(t,T,o),r(t,L,o),Y||(U=[m(a,"input",e[25]),m(g,"input",e[26]),m($,"input",e[27]),m(v,"click",e[12]),m(A,"click",e[28]),m(x,"click",e[29]),m(j,"click",e[30])],Y=!0)},p(t,e){if(2&e[0]&&a.value!==t[1]&&_(a,t[1]),4&e[0]&&g.value!==t[2]&&_(g,t[2]),8&e[0]&&$.value!==t[3]&&_($,t[3]),512&e[0]&&d(O,t[9]),1024&e[0]&&d(P,t[10]),27255281&e[0]){let n;for(z=t[0],n=0;n<z.length;n+=1){const o=N(t,z,n);G[n]?G[n].p(o,e):(G[n]=J(o),G[n].c(),G[n].m(B,null))}for(;n<G.length;n+=1)G[n].d(1);G.length=z.length}},i:t,o:t,d(t){t&&i(n),t&&i(a),t&&i(l),t&&i(g),t&&i(y),t&&i(w),t&&i(D),t&&i(B),s(G,t),t&&i(T),t&&i(L),Y=!1,o(U)}}}let I="https://spectrum-whip-sulfur.glitch.me/";function K(t,e,n){let o,a=[],l="user1",c="user_pass1",r="https://yanaka.dev/",i="comment1",s="reply1",u="tag1",f=[],h="",m="ASC",p="id",d="",_="",g="";const y=async({ORDER_BY_PARAM:t="DESC",ORDER_BY_COLUMN_PARAM:e="id",REQ_TAG_PARAM:o,USER_PARAM:l})=>{console.log(e);try{n(9,m=t),n(10,p=e),d=o,_=l;const c=()=>{const t=[];m&&t.push(`order_by=${m}`),p&&t.push(`order_by_column=${p}`),d&&t.push(`tag=${d}`),_&&t.push(`user=${_}`);return`${I+"read_all"}?${t.join("&")}`},r=await(await fetch(c())).json();if("fail"===r.result)throw new Error(r.error);const i=await(await fetch(c())).json();if(0===i.length)throw new Error("条件に一致するデータがありませんでした");n(0,a=i.message)}catch(t){console.log(t),t.message}},b=t=>({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),k=async t=>{try{200===t.status&&(g=t.result),"fail"===t.result||400===t.status?(()=>{throw new Error(t.message)})():await y({})}catch(t){(()=>{throw new Error(t.message)})()}},v=async()=>{const t=await(await fetch(I+"get_tags_for_autocomplete",b({name:l,password:c}))).json(),e=await t;n(7,f=await e.message)},E=async()=>{switch(!0){case"id"===p:n(10,p="created_at");break;case"created_at"===p:n(10,p="updated_at");break;default:n(10,p="id")}await y({ORDER_BY_PARAM:m,ORDER_BY_COLUMN_PARAM:p,REQ_TAG_PARAM:"TEST"})},A=async()=>{switch(!0){case"ASC"===m:n(9,m="DESC");break;case"DESC"===m:n(9,m="ASC");break;default:n(10,p="DESC")}await y({ORDER_BY_PARAM:m,ORDER_BY_COLUMN_PARAM:p})},R=async t=>{d=t,await y({REQ_TAG_PARAM:d})},x=async t=>{const e=t||"user1";await y({USER_PARAM:e})};w((async()=>{try{await y({}),await v()}catch(t){console.log(t)}}));return[a,l,c,r,i,s,u,f,h,m,p,y,async()=>{try{o=await(await fetch(I+"insert_link",b({name:l,password:c,link:r}))).json(),await k(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(I+"delete_link",b({name:l,password:c,id:t}))).json(),await k(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(I+"like_increment_or_decrement",b({name:l,password:c,link_id:t}))).json(),await k(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(I+"insert_comment",b({name:l,password:c,link_id:t,comment:i}))).json(),await k(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(I+"delete_comment",b({name:l,password:c,comment_id:t}))).json(),await k(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(I+"insert_comment_reply",b({name:l,password:c,comment_id:t,comment_reply:s}))).json(),await k(o)}catch(t){t.message}},async t=>{try{o=await(await fetch(I+"delete_comment_reply",b({name:l,password:c,comment_reply_id:t}))).json(),await k(o)}catch(t){t.message}},async(t,e)=>{try{n(6,u=e||h.value),o=await(await fetch(I+"insert_tag",b({name:l,password:c,link_id:t,tag:u}))).json(),await k(o)}catch(t){t.message}},v,E,A,R,x,function(){l=this.value,n(1,l)},function(){c=this.value,n(2,c)},function(){r=this.value,n(3,r)},()=>y({}),()=>A(),()=>E(),t=>R(t.tag),function(t){$[t?"unshift":"push"]((()=>{h=t,n(8,h)}))},function(){u=this.value,n(6,u)},t=>x(t.username),function(){i=this.value,n(4,i)},(t,e)=>x(t[e].username),function(){s=this.value,n(5,s)},t=>x(t.username)]}return new class extends B{constructor(t){super(),D(this,t,K,V,l,{},null,[-1,-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
